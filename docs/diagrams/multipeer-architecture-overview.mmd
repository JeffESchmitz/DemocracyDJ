flowchart TD
  subgraph TCA["TCA Reducers"]
    Host["HostFeature"]
    Guest["GuestFeature"]
  end

  subgraph ClientBox["MultipeerClient"]
    Client["API:
• startHosting()
• startBrowsing()
• send()
• stop()
• events() → AsyncStream"]
  end

  subgraph ActorBox["MultipeerActor (Concurrency Boundary)"]
    PeerMap["peerMap: [MCPeerID: Peer]\n(MCPeerID never escapes this actor)"]
    Session["MCSession"]
    Advertiser["MCNearbyServiceAdvertiser"]
    Browser["MCNearbyServiceBrowser"]
  end

  Host --> Client
  Guest --> Client

  Client --> ActorBox

  PeerMap --- Session
  PeerMap --- Advertiser
  PeerMap --- Browser
